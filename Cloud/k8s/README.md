# Развертка Kubernetes для приложения на Flask

Этот репозиторий содержит файлы конфигурации для развертывания приложения Flask и базы данных PostgreSQL в кластере Kubernetes. Развертывание состоит из двух основных частей:

1. Развертывание приложения Flask.
2. Развертывание базы данных PostgreSQL, сервис и постоянное хранилище.

## Содержание
- [Развертка Kubernetes для приложения на Flask](#развертка-kubernetes-для-приложения-на-flask)
  - [Содержание](#содержание)
  - [Предварительные требования](#предварительные-требования)
  - [Инструкции для развертывания](#инструкции-для-развертывания)
  - [Доступ к кластеру](#доступ-к-кластеру)
  - [Удаление](#удаление)

## Предварительные требования

- Кластер Kubernetes (локальный или [облачный](https://yandex.cloud/ru/))
- `kubectl` - инструмент командной строки, установленный и настроенный для взаимодействия с вашим кластером.
- Docker image для Flask приложения: `cr.yandex/<token>/flask-app:<version>`.


## Инструкции для развертывания
1. Создание Namespace и развертывание приложения:

`kubectl apply -f app.yml`

2. Deploy PostgreSQL Database:
   
`kubectl apply -f postgres.yml`

3. Проверка развертывания: 

`kubectl get pods -n app`\
`kubectl get services -n app`

## Доступ к кластеру
Для доступа к приложению в Kubernetes вам может понадобиться настройка сервиса типа LoadBalancer или NodePort, или использование переадресации портов (port-forwarding) для локального доступа.\
`kubectl port-forward -n app deploy/app 8000:8000`

## Удаление
для удаления всех кластеров:\
`kubectl delete -f app.yml`\
`kubectl delete -f postgres.yml`